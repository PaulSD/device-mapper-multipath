From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Martin Wilck <mwilck@suse.com>
Date: Fri, 13 Apr 2018 19:20:42 +0200
Subject: [PATCH] libmultipath: Fix logic in should_multipath

Commit d3b71498 missed a negation.

Fixes: d3b71498 "multipath: fix rcu thread cancellation hang"
Signed-off-by: Martin Wilck <mwilck@suse.com>
Signed-off-by: Benjamin Marzinski <bmarzins@redhat.com>
---
 libmultipath/wwids.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/libmultipath/wwids.c b/libmultipath/wwids.c
index 0ec9f25..8c21b33 100644
--- a/libmultipath/wwids.c
+++ b/libmultipath/wwids.c
@@ -284,7 +284,7 @@ should_multipath(struct path *pp1, vector pathvec)
 	ignore_new_devs = conf->ignore_new_devs;
 	find_multipaths = conf->find_multipaths;
 	put_multipath_config(conf);
-	if (find_multipaths && !ignore_new_devs)
+	if (!find_multipaths && !ignore_new_devs)
 		return 1;
 
 	condlog(4, "checking if %s should be multipathed", pp1->dev);
-- 
2.7.4

