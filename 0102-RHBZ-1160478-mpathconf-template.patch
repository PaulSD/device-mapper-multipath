---
 multipath/mpathconf   |   26 ++++++++++++++++++++------
 multipath/mpathconf.8 |   16 +++++++---------
 2 files changed, 27 insertions(+), 15 deletions(-)

Index: multipath-tools-130222/multipath/mpathconf
===================================================================
--- multipath-tools-130222.orig/multipath/mpathconf
+++ multipath-tools-130222/multipath/mpathconf
@@ -19,10 +19,27 @@
 
 unset ENABLE FIND FRIENDLY MODULE MULTIPATHD HAVE_DISABLE HAVE_FIND HAVE_BLACKLIST HAVE_DEFAULTS HAVE_FRIENDLY HAVE_MULTIPATHD HAVE_MODULE SHOW_STATUS CHANGED_CONFIG
 
-DEFAULT_CONFIGFILE="/usr/share/doc/device-mapper-multipath-0.4.9/multipath.conf"
+DEFAULT_CONFIG="# device-mapper-multipath configuration file
+
+# For a complete list of the default configuration values, run either:
+# # multipath -t
+# or
+# # multipathd show config
+
+# For a list of configuration options with descriptions, see the
+# multipath.conf man page.
+
+# For an example configuration file, see:
+# /user/share/doc/device-mapper-multipath/multipath.conf
+
+defaults {
+	user_friendly_names yes
+	find_multipaths yes
+}"
+
 CONFIGFILE="/etc/multipath.conf"
 MULTIPATHDIR="/etc/multipath"
-TMPFILE=/etc/multipath/.multipath.conf.tmp
+TMPFILE="/etc/multipath/.multipath.conf.tmp"
 
 function usage
 {
@@ -134,12 +151,9 @@ if [ ! -d "$MULTIPATHDIR" ]; then
 fi
 
 rm $TMPFILE 2> /dev/null
+echo "$DEFAULT_CONFIG" > $TMPFILE
 if [ -f "$CONFIGFILE" ]; then
 	cp $CONFIGFILE $TMPFILE
-elif [ -f "$DEFAULT_CONFIGFILE" ]; then
-	cp $DEFAULT_CONFIGFILE $TMPFILE
-else
-	touch $TMPFILE
 fi
 
 if grep -q "^blacklist[[:space:]]*{" $TMPFILE ; then
Index: multipath-tools-130222/multipath/mpathconf.8
===================================================================
--- multipath-tools-130222.orig/multipath/mpathconf.8
+++ multipath-tools-130222/multipath/mpathconf.8
@@ -34,17 +34,15 @@ that users can manually edit their confi
 If
 .B /etc/multipath.conf
 already exists, mpathconf will edit it. If it does not exist, mpathconf will
-use
-.B /usr/share/doc/device-mapper-multipath-0.4.9/multipath.conf
-as the starting file. This file has
+create a default file with
 .B user_friendly_names
-set. If this file does not exist, mpathconf will create
-.B /etc/multipath.conf
-from scratch.  For most users, this means that
-.B user_friendly_names
-will be set by default, unless they use the
+and
+.B find_multipaths
+set. To disable these, use the
 .B --user_friendly_names n
-command.
+and
+.B --find_multipaths n
+options
 .SH COMMANDS
 .TP
 .B --enable
